{"ast":null,"code":"\"use client\";\n\nimport _slicedToArray from \"/Users/shamryshiraz/Documents/New/Untitled/Portfolio/New/Portfolio-Ruwan-Prasanna/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { isValidText } from './util';\nvar MeasureText = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var style = _ref.style,\n      children = _ref.children;\n  var spanRef = React.useRef(null);\n  React.useImperativeHandle(ref, function () {\n    return {\n      isExceed: function isExceed() {\n        var span = spanRef.current;\n        return span.scrollHeight > span.clientHeight;\n      },\n      getHeight: function getHeight() {\n        return spanRef.current.clientHeight;\n      }\n    };\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true,\n    ref: spanRef,\n    style: Object.assign({\n      position: 'fixed',\n      display: 'block',\n      left: 0,\n      top: 0,\n      pointerEvents: 'none',\n      backgroundColor: 'rgba(255, 0, 0, 0.65)'\n    }, style)\n  }, children);\n});\n\nvar getNodesLen = function getNodesLen(nodeList) {\n  return nodeList.reduce(function (totalLen, node) {\n    return totalLen + (isValidText(node) ? String(node).length : 1);\n  }, 0);\n};\n\nfunction sliceNodes(nodeList, len) {\n  var currLen = 0;\n  var currentNodeList = [];\n\n  for (var i = 0; i < nodeList.length; i += 1) {\n    // Match to return\n    if (currLen === len) {\n      return currentNodeList;\n    }\n\n    var node = nodeList[i];\n    var canCut = isValidText(node);\n    var nodeLen = canCut ? String(node).length : 1;\n    var nextLen = currLen + nodeLen; // Exceed but current not which means we need cut this\n    // This will not happen on validate ReactElement\n\n    if (nextLen > len) {\n      var restLen = len - currLen;\n      currentNodeList.push(String(node).slice(0, restLen));\n      return currentNodeList;\n    }\n\n    currentNodeList.push(node);\n    currLen = nextLen;\n  }\n\n  return nodeList;\n} // Measure for the `text` is exceed the `rows` or not\n\n\nvar STATUS_MEASURE_NONE = 0;\nvar STATUS_MEASURE_PREPARE = 1;\nvar STATUS_MEASURE_START = 2;\nvar STATUS_MEASURE_NEED_ELLIPSIS = 3;\nvar STATUS_MEASURE_NO_NEED_ELLIPSIS = 4;\nvar lineClipStyle = {\n  display: '-webkit-box',\n  overflow: 'hidden',\n  WebkitBoxOrient: 'vertical'\n};\nexport default function EllipsisMeasure(props) {\n  var enableMeasure = props.enableMeasure,\n      width = props.width,\n      text = props.text,\n      children = props.children,\n      rows = props.rows,\n      expanded = props.expanded,\n      miscDeps = props.miscDeps,\n      onEllipsis = props.onEllipsis;\n  var nodeList = React.useMemo(function () {\n    return toArray(text);\n  }, [text]);\n  var nodeLen = React.useMemo(function () {\n    return getNodesLen(nodeList);\n  }, [text]); // ========================= Full Content =========================\n  // Used for measure only, which means it's always render as no need ellipsis\n\n  var fullContent = React.useMemo(function () {\n    return children(nodeList, false);\n  }, [text]); // ========================= Cut Content ==========================\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      ellipsisCutIndex = _React$useState2[0],\n      setEllipsisCutIndex = _React$useState2[1];\n\n  var cutMidRef = React.useRef(null); // ========================= NeedEllipsis =========================\n\n  var measureWhiteSpaceRef = React.useRef(null);\n  var needEllipsisRef = React.useRef(null); // Measure for `rows-1` height, to avoid operation exceed the line height\n\n  var descRowsEllipsisRef = React.useRef(null);\n  var symbolRowEllipsisRef = React.useRef(null);\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      canEllipsis = _React$useState4[0],\n      setCanEllipsis = _React$useState4[1];\n\n  var _React$useState5 = React.useState(STATUS_MEASURE_NONE),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      needEllipsis = _React$useState6[0],\n      setNeedEllipsis = _React$useState6[1];\n\n  var _React$useState7 = React.useState(0),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      ellipsisHeight = _React$useState8[0],\n      setEllipsisHeight = _React$useState8[1];\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      parentWhiteSpace = _React$useState10[0],\n      setParentWhiteSpace = _React$useState10[1]; // Trigger start measure\n\n\n  useLayoutEffect(function () {\n    if (enableMeasure && width && nodeLen) {\n      setNeedEllipsis(STATUS_MEASURE_PREPARE);\n    } else {\n      setNeedEllipsis(STATUS_MEASURE_NONE);\n    }\n  }, [width, text, rows, enableMeasure, nodeList]); // Measure process\n\n  useLayoutEffect(function () {\n    var _a, _b, _c, _d;\n\n    if (needEllipsis === STATUS_MEASURE_PREPARE) {\n      setNeedEllipsis(STATUS_MEASURE_START); // Parent ref `white-space`\n\n      var nextWhiteSpace = measureWhiteSpaceRef.current && getComputedStyle(measureWhiteSpaceRef.current).whiteSpace;\n      setParentWhiteSpace(nextWhiteSpace);\n    } else if (needEllipsis === STATUS_MEASURE_START) {\n      var isOverflow = !!((_a = needEllipsisRef.current) === null || _a === void 0 ? void 0 : _a.isExceed());\n      setNeedEllipsis(isOverflow ? STATUS_MEASURE_NEED_ELLIPSIS : STATUS_MEASURE_NO_NEED_ELLIPSIS);\n      setEllipsisCutIndex(isOverflow ? [0, nodeLen] : null);\n      setCanEllipsis(isOverflow); // Get the basic height of ellipsis rows\n\n      var baseRowsEllipsisHeight = ((_b = needEllipsisRef.current) === null || _b === void 0 ? void 0 : _b.getHeight()) || 0; // Get the height of `rows - 1` + symbol height\n\n      var descRowsEllipsisHeight = rows === 1 ? 0 : ((_c = descRowsEllipsisRef.current) === null || _c === void 0 ? void 0 : _c.getHeight()) || 0;\n      var symbolRowEllipsisHeight = ((_d = symbolRowEllipsisRef.current) === null || _d === void 0 ? void 0 : _d.getHeight()) || 0;\n      var maxRowsHeight = Math.max(baseRowsEllipsisHeight, // height of rows with ellipsis\n      descRowsEllipsisHeight + symbolRowEllipsisHeight);\n      setEllipsisHeight(maxRowsHeight + 1);\n      onEllipsis(isOverflow);\n    }\n  }, [needEllipsis]); // ========================= Cut Measure ==========================\n\n  var cutMidIndex = ellipsisCutIndex ? Math.ceil((ellipsisCutIndex[0] + ellipsisCutIndex[1]) / 2) : 0;\n  useLayoutEffect(function () {\n    var _a;\n\n    var _ref2 = ellipsisCutIndex || [0, 0],\n        _ref3 = _slicedToArray(_ref2, 2),\n        minIndex = _ref3[0],\n        maxIndex = _ref3[1];\n\n    if (minIndex !== maxIndex) {\n      var midHeight = ((_a = cutMidRef.current) === null || _a === void 0 ? void 0 : _a.getHeight()) || 0;\n      var isOverflow = midHeight > ellipsisHeight;\n      var targetMidIndex = cutMidIndex;\n\n      if (maxIndex - minIndex === 1) {\n        targetMidIndex = isOverflow ? minIndex : maxIndex;\n      }\n\n      setEllipsisCutIndex(isOverflow ? [minIndex, targetMidIndex] : [targetMidIndex, maxIndex]);\n    }\n  }, [ellipsisCutIndex, cutMidIndex]); // ========================= Text Content =========================\n\n  var finalContent = React.useMemo(function () {\n    // Skip everything if `enableMeasure` is disabled\n    if (!enableMeasure) {\n      return children(nodeList, false);\n    }\n\n    if (needEllipsis !== STATUS_MEASURE_NEED_ELLIPSIS || !ellipsisCutIndex || ellipsisCutIndex[0] !== ellipsisCutIndex[1]) {\n      var content = children(nodeList, false); // Limit the max line count to avoid scrollbar blink unless no need ellipsis\n      // https://github.com/ant-design/ant-design/issues/42958\n\n      if ([STATUS_MEASURE_NO_NEED_ELLIPSIS, STATUS_MEASURE_NONE].includes(needEllipsis)) {\n        return content;\n      }\n\n      return /*#__PURE__*/React.createElement(\"span\", {\n        style: Object.assign(Object.assign({}, lineClipStyle), {\n          WebkitLineClamp: rows\n        })\n      }, content);\n    }\n\n    return children(expanded ? nodeList : sliceNodes(nodeList, ellipsisCutIndex[0]), canEllipsis);\n  }, [expanded, needEllipsis, ellipsisCutIndex, nodeList].concat(_toConsumableArray(miscDeps))); // ============================ Render ============================\n\n  var measureStyle = {\n    width: width,\n    margin: 0,\n    padding: 0,\n    whiteSpace: parentWhiteSpace === 'nowrap' ? 'normal' : 'inherit'\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, finalContent, needEllipsis === STATUS_MEASURE_START && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: rows\n    }),\n    ref: needEllipsisRef\n  }, fullContent), /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: rows - 1\n    }),\n    ref: descRowsEllipsisRef\n  }, fullContent), /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: 1\n    }),\n    ref: symbolRowEllipsisRef\n  }, children([], true))), needEllipsis === STATUS_MEASURE_NEED_ELLIPSIS && ellipsisCutIndex && ellipsisCutIndex[0] !== ellipsisCutIndex[1] && /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign({}, measureStyle), {\n      top: 400\n    }),\n    ref: cutMidRef\n  }, children(sliceNodes(nodeList, cutMidIndex), true)), needEllipsis === STATUS_MEASURE_PREPARE && /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      whiteSpace: 'inherit'\n    },\n    ref: measureWhiteSpaceRef\n  }));\n}","map":{"version":3,"sources":["/Users/shamryshiraz/Documents/New/Untitled/Portfolio/New/Portfolio-Ruwan-Prasanna/node_modules/antd/es/typography/Base/Ellipsis.js"],"names":["_toConsumableArray","React","toArray","useLayoutEffect","isValidText","MeasureText","forwardRef","ref","style","children","spanRef","useRef","useImperativeHandle","isExceed","span","current","scrollHeight","clientHeight","getHeight","createElement","Object","assign","position","display","left","top","pointerEvents","backgroundColor","getNodesLen","nodeList","reduce","totalLen","node","String","length","sliceNodes","len","currLen","currentNodeList","i","canCut","nodeLen","nextLen","restLen","push","slice","STATUS_MEASURE_NONE","STATUS_MEASURE_PREPARE","STATUS_MEASURE_START","STATUS_MEASURE_NEED_ELLIPSIS","STATUS_MEASURE_NO_NEED_ELLIPSIS","lineClipStyle","overflow","WebkitBoxOrient","EllipsisMeasure","props","enableMeasure","width","text","rows","expanded","miscDeps","onEllipsis","useMemo","fullContent","useState","ellipsisCutIndex","setEllipsisCutIndex","cutMidRef","measureWhiteSpaceRef","needEllipsisRef","descRowsEllipsisRef","symbolRowEllipsisRef","canEllipsis","setCanEllipsis","needEllipsis","setNeedEllipsis","ellipsisHeight","setEllipsisHeight","parentWhiteSpace","setParentWhiteSpace","_a","_b","_c","_d","nextWhiteSpace","getComputedStyle","whiteSpace","isOverflow","baseRowsEllipsisHeight","descRowsEllipsisHeight","symbolRowEllipsisHeight","maxRowsHeight","Math","max","cutMidIndex","ceil","minIndex","maxIndex","midHeight","targetMidIndex","finalContent","content","includes","WebkitLineClamp","concat","measureStyle","margin","padding","Fragment"],"mappings":"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","sourcesContent":["\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport toArray from \"rc-util/es/Children/toArray\";\nimport useLayoutEffect from \"rc-util/es/hooks/useLayoutEffect\";\nimport { isValidText } from './util';\nconst MeasureText = /*#__PURE__*/React.forwardRef(({\n  style,\n  children\n}, ref) => {\n  const spanRef = React.useRef(null);\n  React.useImperativeHandle(ref, () => ({\n    isExceed: () => {\n      const span = spanRef.current;\n      return span.scrollHeight > span.clientHeight;\n    },\n    getHeight: () => spanRef.current.clientHeight\n  }));\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"aria-hidden\": true,\n    ref: spanRef,\n    style: Object.assign({\n      position: 'fixed',\n      display: 'block',\n      left: 0,\n      top: 0,\n      pointerEvents: 'none',\n      backgroundColor: 'rgba(255, 0, 0, 0.65)'\n    }, style)\n  }, children);\n});\nconst getNodesLen = nodeList => nodeList.reduce((totalLen, node) => totalLen + (isValidText(node) ? String(node).length : 1), 0);\nfunction sliceNodes(nodeList, len) {\n  let currLen = 0;\n  const currentNodeList = [];\n  for (let i = 0; i < nodeList.length; i += 1) {\n    // Match to return\n    if (currLen === len) {\n      return currentNodeList;\n    }\n    const node = nodeList[i];\n    const canCut = isValidText(node);\n    const nodeLen = canCut ? String(node).length : 1;\n    const nextLen = currLen + nodeLen;\n    // Exceed but current not which means we need cut this\n    // This will not happen on validate ReactElement\n    if (nextLen > len) {\n      const restLen = len - currLen;\n      currentNodeList.push(String(node).slice(0, restLen));\n      return currentNodeList;\n    }\n    currentNodeList.push(node);\n    currLen = nextLen;\n  }\n  return nodeList;\n}\n// Measure for the `text` is exceed the `rows` or not\nconst STATUS_MEASURE_NONE = 0;\nconst STATUS_MEASURE_PREPARE = 1;\nconst STATUS_MEASURE_START = 2;\nconst STATUS_MEASURE_NEED_ELLIPSIS = 3;\nconst STATUS_MEASURE_NO_NEED_ELLIPSIS = 4;\nconst lineClipStyle = {\n  display: '-webkit-box',\n  overflow: 'hidden',\n  WebkitBoxOrient: 'vertical'\n};\nexport default function EllipsisMeasure(props) {\n  const {\n    enableMeasure,\n    width,\n    text,\n    children,\n    rows,\n    expanded,\n    miscDeps,\n    onEllipsis\n  } = props;\n  const nodeList = React.useMemo(() => toArray(text), [text]);\n  const nodeLen = React.useMemo(() => getNodesLen(nodeList), [text]);\n  // ========================= Full Content =========================\n  // Used for measure only, which means it's always render as no need ellipsis\n  const fullContent = React.useMemo(() => children(nodeList, false), [text]);\n  // ========================= Cut Content ==========================\n  const [ellipsisCutIndex, setEllipsisCutIndex] = React.useState(null);\n  const cutMidRef = React.useRef(null);\n  // ========================= NeedEllipsis =========================\n  const measureWhiteSpaceRef = React.useRef(null);\n  const needEllipsisRef = React.useRef(null);\n  // Measure for `rows-1` height, to avoid operation exceed the line height\n  const descRowsEllipsisRef = React.useRef(null);\n  const symbolRowEllipsisRef = React.useRef(null);\n  const [canEllipsis, setCanEllipsis] = React.useState(false);\n  const [needEllipsis, setNeedEllipsis] = React.useState(STATUS_MEASURE_NONE);\n  const [ellipsisHeight, setEllipsisHeight] = React.useState(0);\n  const [parentWhiteSpace, setParentWhiteSpace] = React.useState(null);\n  // Trigger start measure\n  useLayoutEffect(() => {\n    if (enableMeasure && width && nodeLen) {\n      setNeedEllipsis(STATUS_MEASURE_PREPARE);\n    } else {\n      setNeedEllipsis(STATUS_MEASURE_NONE);\n    }\n  }, [width, text, rows, enableMeasure, nodeList]);\n  // Measure process\n  useLayoutEffect(() => {\n    var _a, _b, _c, _d;\n    if (needEllipsis === STATUS_MEASURE_PREPARE) {\n      setNeedEllipsis(STATUS_MEASURE_START);\n      // Parent ref `white-space`\n      const nextWhiteSpace = measureWhiteSpaceRef.current && getComputedStyle(measureWhiteSpaceRef.current).whiteSpace;\n      setParentWhiteSpace(nextWhiteSpace);\n    } else if (needEllipsis === STATUS_MEASURE_START) {\n      const isOverflow = !!((_a = needEllipsisRef.current) === null || _a === void 0 ? void 0 : _a.isExceed());\n      setNeedEllipsis(isOverflow ? STATUS_MEASURE_NEED_ELLIPSIS : STATUS_MEASURE_NO_NEED_ELLIPSIS);\n      setEllipsisCutIndex(isOverflow ? [0, nodeLen] : null);\n      setCanEllipsis(isOverflow);\n      // Get the basic height of ellipsis rows\n      const baseRowsEllipsisHeight = ((_b = needEllipsisRef.current) === null || _b === void 0 ? void 0 : _b.getHeight()) || 0;\n      // Get the height of `rows - 1` + symbol height\n      const descRowsEllipsisHeight = rows === 1 ? 0 : ((_c = descRowsEllipsisRef.current) === null || _c === void 0 ? void 0 : _c.getHeight()) || 0;\n      const symbolRowEllipsisHeight = ((_d = symbolRowEllipsisRef.current) === null || _d === void 0 ? void 0 : _d.getHeight()) || 0;\n      const maxRowsHeight = Math.max(baseRowsEllipsisHeight,\n      // height of rows with ellipsis\n      descRowsEllipsisHeight + symbolRowEllipsisHeight);\n      setEllipsisHeight(maxRowsHeight + 1);\n      onEllipsis(isOverflow);\n    }\n  }, [needEllipsis]);\n  // ========================= Cut Measure ==========================\n  const cutMidIndex = ellipsisCutIndex ? Math.ceil((ellipsisCutIndex[0] + ellipsisCutIndex[1]) / 2) : 0;\n  useLayoutEffect(() => {\n    var _a;\n    const [minIndex, maxIndex] = ellipsisCutIndex || [0, 0];\n    if (minIndex !== maxIndex) {\n      const midHeight = ((_a = cutMidRef.current) === null || _a === void 0 ? void 0 : _a.getHeight()) || 0;\n      const isOverflow = midHeight > ellipsisHeight;\n      let targetMidIndex = cutMidIndex;\n      if (maxIndex - minIndex === 1) {\n        targetMidIndex = isOverflow ? minIndex : maxIndex;\n      }\n      setEllipsisCutIndex(isOverflow ? [minIndex, targetMidIndex] : [targetMidIndex, maxIndex]);\n    }\n  }, [ellipsisCutIndex, cutMidIndex]);\n  // ========================= Text Content =========================\n  const finalContent = React.useMemo(() => {\n    // Skip everything if `enableMeasure` is disabled\n    if (!enableMeasure) {\n      return children(nodeList, false);\n    }\n    if (needEllipsis !== STATUS_MEASURE_NEED_ELLIPSIS || !ellipsisCutIndex || ellipsisCutIndex[0] !== ellipsisCutIndex[1]) {\n      const content = children(nodeList, false);\n      // Limit the max line count to avoid scrollbar blink unless no need ellipsis\n      // https://github.com/ant-design/ant-design/issues/42958\n      if ([STATUS_MEASURE_NO_NEED_ELLIPSIS, STATUS_MEASURE_NONE].includes(needEllipsis)) {\n        return content;\n      }\n      return /*#__PURE__*/React.createElement(\"span\", {\n        style: Object.assign(Object.assign({}, lineClipStyle), {\n          WebkitLineClamp: rows\n        })\n      }, content);\n    }\n    return children(expanded ? nodeList : sliceNodes(nodeList, ellipsisCutIndex[0]), canEllipsis);\n  }, [expanded, needEllipsis, ellipsisCutIndex, nodeList].concat(_toConsumableArray(miscDeps)));\n  // ============================ Render ============================\n  const measureStyle = {\n    width,\n    margin: 0,\n    padding: 0,\n    whiteSpace: parentWhiteSpace === 'nowrap' ? 'normal' : 'inherit'\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, finalContent, needEllipsis === STATUS_MEASURE_START && (/*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: rows\n    }),\n    ref: needEllipsisRef\n  }, fullContent), /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: rows - 1\n    }),\n    ref: descRowsEllipsisRef\n  }, fullContent), /*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign(Object.assign({}, measureStyle), lineClipStyle), {\n      WebkitLineClamp: 1\n    }),\n    ref: symbolRowEllipsisRef\n  }, children([], true)))), needEllipsis === STATUS_MEASURE_NEED_ELLIPSIS && ellipsisCutIndex && ellipsisCutIndex[0] !== ellipsisCutIndex[1] && (/*#__PURE__*/React.createElement(MeasureText, {\n    style: Object.assign(Object.assign({}, measureStyle), {\n      top: 400\n    }),\n    ref: cutMidRef\n  }, children(sliceNodes(nodeList, cutMidIndex), true))), needEllipsis === STATUS_MEASURE_PREPARE && (/*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      whiteSpace: 'inherit'\n    },\n    ref: measureWhiteSpaceRef\n  })));\n}"]},"metadata":{},"sourceType":"module"}