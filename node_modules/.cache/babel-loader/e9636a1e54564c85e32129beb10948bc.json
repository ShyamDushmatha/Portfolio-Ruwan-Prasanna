{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"component\", \"prefixCls\", \"className\", \"classNames\", \"disabled\", \"id\", \"name\", \"style\", \"styles\", \"multiple\", \"accept\", \"capture\", \"children\", \"directory\", \"openFileDialogOnClick\", \"onMouseEnter\", \"onMouseLeave\", \"hasControlInside\"];\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\n\nimport clsx from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport React, { Component } from 'react';\nimport attrAccept from \"./attr-accept\";\nimport defaultRequest from \"./request\";\nimport traverseFileTree from \"./traverseFileTree\";\nimport getUid from \"./uid\";\n\nvar AjaxUploader = /*#__PURE__*/function (_Component) {\n  _inherits(AjaxUploader, _Component);\n\n  var _super = _createSuper(AjaxUploader);\n\n  function AjaxUploader() {\n    var _this;\n\n    _classCallCheck(this, AjaxUploader);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      uid: getUid()\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"reqs\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"fileInput\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      var _this$props = _this.props,\n          accept = _this$props.accept,\n          directory = _this$props.directory;\n      var files = e.target.files;\n\n      var acceptedFiles = _toConsumableArray(files).filter(function (file) {\n        return !directory || attrAccept(file, accept);\n      });\n\n      _this.uploadFiles(acceptedFiles);\n\n      _this.reset();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var el = _this.fileInput;\n\n      if (!el) {\n        return;\n      }\n\n      var target = event.target;\n      var onClick = _this.props.onClick;\n\n      if (target && target.tagName === 'BUTTON') {\n        var parent = el.parentNode;\n        parent.focus();\n        target.blur();\n      }\n\n      el.click();\n\n      if (onClick) {\n        onClick(event);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick(e);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDataTransferFiles\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(dataTransfer, existFileCallback) {\n        var _this$props2, multiple, accept, directory, items, files, acceptFiles;\n\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$props2 = _this.props, multiple = _this$props2.multiple, accept = _this$props2.accept, directory = _this$props2.directory;\n                items = _toConsumableArray(dataTransfer.items || []);\n                files = _toConsumableArray(dataTransfer.files || []);\n\n                if (files.length > 0 || items.some(function (item) {\n                  return item.kind === 'file';\n                })) {\n                  existFileCallback === null || existFileCallback === void 0 || existFileCallback();\n                }\n\n                if (!directory) {\n                  _context.next = 11;\n                  break;\n                }\n\n                _context.next = 7;\n                return traverseFileTree(Array.prototype.slice.call(items), function (_file) {\n                  return attrAccept(_file, _this.props.accept);\n                });\n\n              case 7:\n                files = _context.sent;\n\n                _this.uploadFiles(files);\n\n                _context.next = 14;\n                break;\n\n              case 11:\n                acceptFiles = _toConsumableArray(files).filter(function (file) {\n                  return attrAccept(file, accept);\n                });\n\n                if (multiple === false) {\n                  acceptFiles = files.slice(0, 1);\n                }\n\n                _this.uploadFiles(acceptFiles);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onFilePaste\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n        var pastable, clipboardData;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                pastable = _this.props.pastable;\n\n                if (pastable) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 3:\n                if (!(e.type === 'paste')) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                clipboardData = e.clipboardData;\n                return _context2.abrupt(\"return\", _this.onDataTransferFiles(clipboardData, function () {\n                  e.preventDefault();\n                }));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x3) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"onFileDragOver\", function (e) {\n      e.preventDefault();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFileDrop\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {\n        var dataTransfer;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n\n                if (!(e.type === 'drop')) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                dataTransfer = e.dataTransfer;\n                return _context3.abrupt(\"return\", _this.onDataTransferFiles(dataTransfer));\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"uploadFiles\", function (files) {\n      var originFiles = _toConsumableArray(files);\n\n      var postFiles = originFiles.map(function (file) {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return _this.processFile(file, originFiles);\n      }); // Batch upload files\n\n      Promise.all(postFiles).then(function (fileList) {\n        var onBatchStart = _this.props.onBatchStart;\n        onBatchStart === null || onBatchStart === void 0 || onBatchStart(fileList.map(function (_ref4) {\n          var origin = _ref4.origin,\n              parsedFile = _ref4.parsedFile;\n          return {\n            file: origin,\n            parsedFile: parsedFile\n          };\n        }));\n        fileList.filter(function (file) {\n          return file.parsedFile !== null;\n        }).forEach(function (file) {\n          _this.post(file);\n        });\n      });\n    });\n    /**\n     * Process file before upload. When all the file is ready, we start upload.\n     */\n\n\n    _defineProperty(_assertThisInitialized(_this), \"processFile\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(file, fileList) {\n        var beforeUpload, transformedFile, action, mergedAction, data, mergedData, parsedData, parsedFile, mergedParsedFile;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                beforeUpload = _this.props.beforeUpload;\n                transformedFile = file;\n\n                if (!beforeUpload) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.prev = 3;\n                _context4.next = 6;\n                return beforeUpload(file, fileList);\n\n              case 6:\n                transformedFile = _context4.sent;\n                _context4.next = 12;\n                break;\n\n              case 9:\n                _context4.prev = 9;\n                _context4.t0 = _context4[\"catch\"](3); // Rejection will also trade as false\n\n                transformedFile = false;\n\n              case 12:\n                if (!(transformedFile === false)) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", {\n                  origin: file,\n                  parsedFile: null,\n                  action: null,\n                  data: null\n                });\n\n              case 14:\n                // Get latest action\n                action = _this.props.action;\n\n                if (!(typeof action === 'function')) {\n                  _context4.next = 21;\n                  break;\n                }\n\n                _context4.next = 18;\n                return action(file);\n\n              case 18:\n                mergedAction = _context4.sent;\n                _context4.next = 22;\n                break;\n\n              case 21:\n                mergedAction = action;\n\n              case 22:\n                // Get latest data\n                data = _this.props.data;\n\n                if (!(typeof data === 'function')) {\n                  _context4.next = 29;\n                  break;\n                }\n\n                _context4.next = 26;\n                return data(file);\n\n              case 26:\n                mergedData = _context4.sent;\n                _context4.next = 30;\n                break;\n\n              case 29:\n                mergedData = data;\n\n              case 30:\n                parsedData = // string type is from legacy `transformFile`.\n                // Not sure if this will work since no related test case works with it\n                (_typeof(transformedFile) === 'object' || typeof transformedFile === 'string') && transformedFile ? transformedFile : file;\n\n                if (parsedData instanceof File) {\n                  parsedFile = parsedData;\n                } else {\n                  parsedFile = new File([parsedData], file.name, {\n                    type: file.type\n                  });\n                }\n\n                mergedParsedFile = parsedFile;\n                mergedParsedFile.uid = file.uid;\n                return _context4.abrupt(\"return\", {\n                  origin: file,\n                  data: mergedData,\n                  parsedFile: mergedParsedFile,\n                  action: mergedAction\n                });\n\n              case 35:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[3, 9]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"saveFileInput\", function (node) {\n      _this.fileInput = node;\n    });\n\n    return _this;\n  }\n\n  _createClass(AjaxUploader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      var pastable = this.props.pastable;\n\n      if (pastable) {\n        document.addEventListener('paste', this.onFilePaste);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n      document.removeEventListener('paste', this.onFilePaste);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var pastable = this.props.pastable;\n\n      if (pastable && !prevProps.pastable) {\n        document.addEventListener('paste', this.onFilePaste);\n      } else if (!pastable && prevProps.pastable) {\n        document.removeEventListener('paste', this.onFilePaste);\n      }\n    }\n  }, {\n    key: \"post\",\n    value: function post(_ref6) {\n      var _this2 = this;\n\n      var data = _ref6.data,\n          origin = _ref6.origin,\n          action = _ref6.action,\n          parsedFile = _ref6.parsedFile;\n\n      if (!this._isMounted) {\n        return;\n      }\n\n      var _this$props3 = this.props,\n          onStart = _this$props3.onStart,\n          customRequest = _this$props3.customRequest,\n          name = _this$props3.name,\n          headers = _this$props3.headers,\n          withCredentials = _this$props3.withCredentials,\n          method = _this$props3.method;\n      var uid = origin.uid;\n      var request = customRequest || defaultRequest;\n      var requestOption = {\n        action: action,\n        filename: name,\n        data: data,\n        file: parsedFile,\n        headers: headers,\n        withCredentials: withCredentials,\n        method: method || 'post',\n        onProgress: function onProgress(e) {\n          var onProgress = _this2.props.onProgress;\n          onProgress === null || onProgress === void 0 || onProgress(e, parsedFile);\n        },\n        onSuccess: function onSuccess(ret, xhr) {\n          var onSuccess = _this2.props.onSuccess;\n          onSuccess === null || onSuccess === void 0 || onSuccess(ret, parsedFile, xhr);\n          delete _this2.reqs[uid];\n        },\n        onError: function onError(err, ret) {\n          var onError = _this2.props.onError;\n          onError === null || onError === void 0 || onError(err, ret, parsedFile);\n          delete _this2.reqs[uid];\n        }\n      };\n      onStart(origin);\n      this.reqs[uid] = request(requestOption);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort(file) {\n      var reqs = this.reqs;\n\n      if (file) {\n        var uid = file.uid ? file.uid : file;\n\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n          Tag = _this$props4.component,\n          prefixCls = _this$props4.prefixCls,\n          className = _this$props4.className,\n          _this$props4$classNam = _this$props4.classNames,\n          classNames = _this$props4$classNam === void 0 ? {} : _this$props4$classNam,\n          disabled = _this$props4.disabled,\n          id = _this$props4.id,\n          name = _this$props4.name,\n          style = _this$props4.style,\n          _this$props4$styles = _this$props4.styles,\n          styles = _this$props4$styles === void 0 ? {} : _this$props4$styles,\n          multiple = _this$props4.multiple,\n          accept = _this$props4.accept,\n          capture = _this$props4.capture,\n          children = _this$props4.children,\n          directory = _this$props4.directory,\n          openFileDialogOnClick = _this$props4.openFileDialogOnClick,\n          onMouseEnter = _this$props4.onMouseEnter,\n          onMouseLeave = _this$props4.onMouseLeave,\n          hasControlInside = _this$props4.hasControlInside,\n          otherProps = _objectWithoutProperties(_this$props4, _excluded);\n\n      var cls = clsx(_defineProperty(_defineProperty(_defineProperty({}, prefixCls, true), \"\".concat(prefixCls, \"-disabled\"), disabled), className, className)); // because input don't have directory/webkitdirectory type declaration\n\n      var dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDragOver,\n        tabIndex: hasControlInside ? undefined : '0'\n      };\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: hasControlInside ? undefined : 'button',\n        style: style\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      }), {\n        id: id\n        /**\n         * https://github.com/ant-design/ant-design/issues/50643,\n         * https://github.com/react-component/upload/pull/575#issuecomment-2320646552\n         */\n        ,\n        name: name,\n        disabled: disabled,\n        type: \"file\",\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: _objectSpread({\n          display: 'none'\n        }, styles.input),\n        className: classNames.input,\n        accept: accept\n      }, dirProps, {\n        multiple: multiple,\n        onChange: this.onChange\n      }, capture != null ? {\n        capture: capture\n      } : {})), children);\n    }\n  }]);\n\n  return AjaxUploader;\n}(Component);\n\nexport default AjaxUploader;","map":{"version":3,"sources":["/Users/shamryshiraz/Documents/New/Untitled/Portfolio/node_modules/rc-upload/es/AjaxUploader.js"],"names":["_extends","_objectSpread","_objectWithoutProperties","_typeof","_regeneratorRuntime","_asyncToGenerator","_toConsumableArray","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","_defineProperty","_excluded","clsx","pickAttrs","React","Component","attrAccept","defaultRequest","traverseFileTree","getUid","AjaxUploader","_Component","_super","_this","_len","arguments","length","args","Array","_key","call","apply","concat","uid","e","_this$props","props","accept","directory","files","target","acceptedFiles","filter","file","uploadFiles","reset","event","el","fileInput","onClick","tagName","parent","parentNode","focus","blur","click","key","_ref","mark","_callee","dataTransfer","existFileCallback","_this$props2","multiple","items","acceptFiles","wrap","_callee$","_context","prev","next","some","item","kind","prototype","slice","_file","sent","stop","_x","_x2","_ref2","_callee2","pastable","clipboardData","_callee2$","_context2","abrupt","type","onDataTransferFiles","preventDefault","_x3","_ref3","_callee3","_callee3$","_context3","_x4","originFiles","postFiles","map","processFile","Promise","all","then","fileList","onBatchStart","_ref4","origin","parsedFile","forEach","post","_ref5","_callee4","beforeUpload","transformedFile","action","mergedAction","data","mergedData","parsedData","mergedParsedFile","_callee4$","_context4","t0","File","name","_x5","_x6","node","value","componentDidMount","_isMounted","document","addEventListener","onFilePaste","componentWillUnmount","abort","removeEventListener","componentDidUpdate","prevProps","_ref6","_this2","_this$props3","onStart","customRequest","headers","withCredentials","method","request","requestOption","filename","onProgress","onSuccess","ret","xhr","reqs","onError","err","setState","Object","keys","render","_this$props4","Tag","component","prefixCls","className","_this$props4$classNam","classNames","disabled","id","style","_this$props4$styles","styles","capture","children","openFileDialogOnClick","onMouseEnter","onMouseLeave","hasControlInside","otherProps","cls","dirProps","webkitdirectory","events","onKeyDown","onDrop","onFileDrop","onDragOver","onFileDragOver","tabIndex","undefined","createElement","role","aria","ref","saveFileInput","stopPropagation","state","display","input","onChange"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _regeneratorRuntime from \"@babel/runtime/helpers/esm/regeneratorRuntime\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _excluded = [\"component\", \"prefixCls\", \"className\", \"classNames\", \"disabled\", \"id\", \"name\", \"style\", \"styles\", \"multiple\", \"accept\", \"capture\", \"children\", \"directory\", \"openFileDialogOnClick\", \"onMouseEnter\", \"onMouseLeave\", \"hasControlInside\"];\n/* eslint react/no-is-mounted:0,react/sort-comp:0,react/prop-types:0 */\nimport clsx from 'classnames';\nimport pickAttrs from \"rc-util/es/pickAttrs\";\nimport React, { Component } from 'react';\nimport attrAccept from \"./attr-accept\";\nimport defaultRequest from \"./request\";\nimport traverseFileTree from \"./traverseFileTree\";\nimport getUid from \"./uid\";\nvar AjaxUploader = /*#__PURE__*/function (_Component) {\n  _inherits(AjaxUploader, _Component);\n  var _super = _createSuper(AjaxUploader);\n  function AjaxUploader() {\n    var _this;\n    _classCallCheck(this, AjaxUploader);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      uid: getUid()\n    });\n    _defineProperty(_assertThisInitialized(_this), \"reqs\", {});\n    _defineProperty(_assertThisInitialized(_this), \"fileInput\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"_isMounted\", void 0);\n    _defineProperty(_assertThisInitialized(_this), \"onChange\", function (e) {\n      var _this$props = _this.props,\n        accept = _this$props.accept,\n        directory = _this$props.directory;\n      var files = e.target.files;\n      var acceptedFiles = _toConsumableArray(files).filter(function (file) {\n        return !directory || attrAccept(file, accept);\n      });\n      _this.uploadFiles(acceptedFiles);\n      _this.reset();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event) {\n      var el = _this.fileInput;\n      if (!el) {\n        return;\n      }\n      var target = event.target;\n      var onClick = _this.props.onClick;\n      if (target && target.tagName === 'BUTTON') {\n        var parent = el.parentNode;\n        parent.focus();\n        target.blur();\n      }\n      el.click();\n      if (onClick) {\n        onClick(event);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onKeyDown\", function (e) {\n      if (e.key === 'Enter') {\n        _this.onClick(e);\n      }\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onDataTransferFiles\", /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(dataTransfer, existFileCallback) {\n        var _this$props2, multiple, accept, directory, items, files, acceptFiles;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = _this.props, multiple = _this$props2.multiple, accept = _this$props2.accept, directory = _this$props2.directory;\n              items = _toConsumableArray(dataTransfer.items || []);\n              files = _toConsumableArray(dataTransfer.files || []);\n              if (files.length > 0 || items.some(function (item) {\n                return item.kind === 'file';\n              })) {\n                existFileCallback === null || existFileCallback === void 0 || existFileCallback();\n              }\n              if (!directory) {\n                _context.next = 11;\n                break;\n              }\n              _context.next = 7;\n              return traverseFileTree(Array.prototype.slice.call(items), function (_file) {\n                return attrAccept(_file, _this.props.accept);\n              });\n            case 7:\n              files = _context.sent;\n              _this.uploadFiles(files);\n              _context.next = 14;\n              break;\n            case 11:\n              acceptFiles = _toConsumableArray(files).filter(function (file) {\n                return attrAccept(file, accept);\n              });\n              if (multiple === false) {\n                acceptFiles = files.slice(0, 1);\n              }\n              _this.uploadFiles(acceptFiles);\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_assertThisInitialized(_this), \"onFilePaste\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e) {\n        var pastable, clipboardData;\n        return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n          while (1) switch (_context2.prev = _context2.next) {\n            case 0:\n              pastable = _this.props.pastable;\n              if (pastable) {\n                _context2.next = 3;\n                break;\n              }\n              return _context2.abrupt(\"return\");\n            case 3:\n              if (!(e.type === 'paste')) {\n                _context2.next = 6;\n                break;\n              }\n              clipboardData = e.clipboardData;\n              return _context2.abrupt(\"return\", _this.onDataTransferFiles(clipboardData, function () {\n                e.preventDefault();\n              }));\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }, _callee2);\n      }));\n      return function (_x3) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_assertThisInitialized(_this), \"onFileDragOver\", function (e) {\n      e.preventDefault();\n    });\n    _defineProperty(_assertThisInitialized(_this), \"onFileDrop\", /*#__PURE__*/function () {\n      var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(e) {\n        var dataTransfer;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              if (!(e.type === 'drop')) {\n                _context3.next = 4;\n                break;\n              }\n              dataTransfer = e.dataTransfer;\n              return _context3.abrupt(\"return\", _this.onDataTransferFiles(dataTransfer));\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3);\n      }));\n      return function (_x4) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_assertThisInitialized(_this), \"uploadFiles\", function (files) {\n      var originFiles = _toConsumableArray(files);\n      var postFiles = originFiles.map(function (file) {\n        // eslint-disable-next-line no-param-reassign\n        file.uid = getUid();\n        return _this.processFile(file, originFiles);\n      });\n\n      // Batch upload files\n      Promise.all(postFiles).then(function (fileList) {\n        var onBatchStart = _this.props.onBatchStart;\n        onBatchStart === null || onBatchStart === void 0 || onBatchStart(fileList.map(function (_ref4) {\n          var origin = _ref4.origin,\n            parsedFile = _ref4.parsedFile;\n          return {\n            file: origin,\n            parsedFile: parsedFile\n          };\n        }));\n        fileList.filter(function (file) {\n          return file.parsedFile !== null;\n        }).forEach(function (file) {\n          _this.post(file);\n        });\n      });\n    });\n    /**\n     * Process file before upload. When all the file is ready, we start upload.\n     */\n    _defineProperty(_assertThisInitialized(_this), \"processFile\", /*#__PURE__*/function () {\n      var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(file, fileList) {\n        var beforeUpload, transformedFile, action, mergedAction, data, mergedData, parsedData, parsedFile, mergedParsedFile;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              beforeUpload = _this.props.beforeUpload;\n              transformedFile = file;\n              if (!beforeUpload) {\n                _context4.next = 14;\n                break;\n              }\n              _context4.prev = 3;\n              _context4.next = 6;\n              return beforeUpload(file, fileList);\n            case 6:\n              transformedFile = _context4.sent;\n              _context4.next = 12;\n              break;\n            case 9:\n              _context4.prev = 9;\n              _context4.t0 = _context4[\"catch\"](3);\n              // Rejection will also trade as false\n              transformedFile = false;\n            case 12:\n              if (!(transformedFile === false)) {\n                _context4.next = 14;\n                break;\n              }\n              return _context4.abrupt(\"return\", {\n                origin: file,\n                parsedFile: null,\n                action: null,\n                data: null\n              });\n            case 14:\n              // Get latest action\n              action = _this.props.action;\n              if (!(typeof action === 'function')) {\n                _context4.next = 21;\n                break;\n              }\n              _context4.next = 18;\n              return action(file);\n            case 18:\n              mergedAction = _context4.sent;\n              _context4.next = 22;\n              break;\n            case 21:\n              mergedAction = action;\n            case 22:\n              // Get latest data\n              data = _this.props.data;\n              if (!(typeof data === 'function')) {\n                _context4.next = 29;\n                break;\n              }\n              _context4.next = 26;\n              return data(file);\n            case 26:\n              mergedData = _context4.sent;\n              _context4.next = 30;\n              break;\n            case 29:\n              mergedData = data;\n            case 30:\n              parsedData =\n              // string type is from legacy `transformFile`.\n              // Not sure if this will work since no related test case works with it\n              (_typeof(transformedFile) === 'object' || typeof transformedFile === 'string') && transformedFile ? transformedFile : file;\n              if (parsedData instanceof File) {\n                parsedFile = parsedData;\n              } else {\n                parsedFile = new File([parsedData], file.name, {\n                  type: file.type\n                });\n              }\n              mergedParsedFile = parsedFile;\n              mergedParsedFile.uid = file.uid;\n              return _context4.abrupt(\"return\", {\n                origin: file,\n                data: mergedData,\n                parsedFile: mergedParsedFile,\n                action: mergedAction\n              });\n            case 35:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, null, [[3, 9]]);\n      }));\n      return function (_x5, _x6) {\n        return _ref5.apply(this, arguments);\n      };\n    }());\n    _defineProperty(_assertThisInitialized(_this), \"saveFileInput\", function (node) {\n      _this.fileInput = node;\n    });\n    return _this;\n  }\n  _createClass(AjaxUploader, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._isMounted = true;\n      var pastable = this.props.pastable;\n      if (pastable) {\n        document.addEventListener('paste', this.onFilePaste);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n      this.abort();\n      document.removeEventListener('paste', this.onFilePaste);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var pastable = this.props.pastable;\n      if (pastable && !prevProps.pastable) {\n        document.addEventListener('paste', this.onFilePaste);\n      } else if (!pastable && prevProps.pastable) {\n        document.removeEventListener('paste', this.onFilePaste);\n      }\n    }\n  }, {\n    key: \"post\",\n    value: function post(_ref6) {\n      var _this2 = this;\n      var data = _ref6.data,\n        origin = _ref6.origin,\n        action = _ref6.action,\n        parsedFile = _ref6.parsedFile;\n      if (!this._isMounted) {\n        return;\n      }\n      var _this$props3 = this.props,\n        onStart = _this$props3.onStart,\n        customRequest = _this$props3.customRequest,\n        name = _this$props3.name,\n        headers = _this$props3.headers,\n        withCredentials = _this$props3.withCredentials,\n        method = _this$props3.method;\n      var uid = origin.uid;\n      var request = customRequest || defaultRequest;\n      var requestOption = {\n        action: action,\n        filename: name,\n        data: data,\n        file: parsedFile,\n        headers: headers,\n        withCredentials: withCredentials,\n        method: method || 'post',\n        onProgress: function onProgress(e) {\n          var onProgress = _this2.props.onProgress;\n          onProgress === null || onProgress === void 0 || onProgress(e, parsedFile);\n        },\n        onSuccess: function onSuccess(ret, xhr) {\n          var onSuccess = _this2.props.onSuccess;\n          onSuccess === null || onSuccess === void 0 || onSuccess(ret, parsedFile, xhr);\n          delete _this2.reqs[uid];\n        },\n        onError: function onError(err, ret) {\n          var onError = _this2.props.onError;\n          onError === null || onError === void 0 || onError(err, ret, parsedFile);\n          delete _this2.reqs[uid];\n        }\n      };\n      onStart(origin);\n      this.reqs[uid] = request(requestOption);\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.setState({\n        uid: getUid()\n      });\n    }\n  }, {\n    key: \"abort\",\n    value: function abort(file) {\n      var reqs = this.reqs;\n      if (file) {\n        var uid = file.uid ? file.uid : file;\n        if (reqs[uid] && reqs[uid].abort) {\n          reqs[uid].abort();\n        }\n        delete reqs[uid];\n      } else {\n        Object.keys(reqs).forEach(function (uid) {\n          if (reqs[uid] && reqs[uid].abort) {\n            reqs[uid].abort();\n          }\n          delete reqs[uid];\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props4 = this.props,\n        Tag = _this$props4.component,\n        prefixCls = _this$props4.prefixCls,\n        className = _this$props4.className,\n        _this$props4$classNam = _this$props4.classNames,\n        classNames = _this$props4$classNam === void 0 ? {} : _this$props4$classNam,\n        disabled = _this$props4.disabled,\n        id = _this$props4.id,\n        name = _this$props4.name,\n        style = _this$props4.style,\n        _this$props4$styles = _this$props4.styles,\n        styles = _this$props4$styles === void 0 ? {} : _this$props4$styles,\n        multiple = _this$props4.multiple,\n        accept = _this$props4.accept,\n        capture = _this$props4.capture,\n        children = _this$props4.children,\n        directory = _this$props4.directory,\n        openFileDialogOnClick = _this$props4.openFileDialogOnClick,\n        onMouseEnter = _this$props4.onMouseEnter,\n        onMouseLeave = _this$props4.onMouseLeave,\n        hasControlInside = _this$props4.hasControlInside,\n        otherProps = _objectWithoutProperties(_this$props4, _excluded);\n      var cls = clsx(_defineProperty(_defineProperty(_defineProperty({}, prefixCls, true), \"\".concat(prefixCls, \"-disabled\"), disabled), className, className));\n      // because input don't have directory/webkitdirectory type declaration\n      var dirProps = directory ? {\n        directory: 'directory',\n        webkitdirectory: 'webkitdirectory'\n      } : {};\n      var events = disabled ? {} : {\n        onClick: openFileDialogOnClick ? this.onClick : function () {},\n        onKeyDown: openFileDialogOnClick ? this.onKeyDown : function () {},\n        onMouseEnter: onMouseEnter,\n        onMouseLeave: onMouseLeave,\n        onDrop: this.onFileDrop,\n        onDragOver: this.onFileDragOver,\n        tabIndex: hasControlInside ? undefined : '0'\n      };\n      return /*#__PURE__*/React.createElement(Tag, _extends({}, events, {\n        className: cls,\n        role: hasControlInside ? undefined : 'button',\n        style: style\n      }), /*#__PURE__*/React.createElement(\"input\", _extends({}, pickAttrs(otherProps, {\n        aria: true,\n        data: true\n      }), {\n        id: id\n        /**\n         * https://github.com/ant-design/ant-design/issues/50643,\n         * https://github.com/react-component/upload/pull/575#issuecomment-2320646552\n         */,\n        name: name,\n        disabled: disabled,\n        type: \"file\",\n        ref: this.saveFileInput,\n        onClick: function onClick(e) {\n          return e.stopPropagation();\n        } // https://github.com/ant-design/ant-design/issues/19948\n        ,\n        key: this.state.uid,\n        style: _objectSpread({\n          display: 'none'\n        }, styles.input),\n        className: classNames.input,\n        accept: accept\n      }, dirProps, {\n        multiple: multiple,\n        onChange: this.onChange\n      }, capture != null ? {\n        capture: capture\n      } : {})), children);\n    }\n  }]);\n  return AjaxUploader;\n}(Component);\nexport default AjaxUploader;"]},"metadata":{},"sourceType":"module"}