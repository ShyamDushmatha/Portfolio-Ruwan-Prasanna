{"ast":null,"code":"\"use client\";\n\nimport _slicedToArray from \"/Users/shamryshiraz/Documents/New/Untitled/Portfolio/New/Portfolio-Ruwan-Prasanna/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport destroyFns from '../destroyFns';\nimport HookModal from './HookModal';\nvar uuid = 0;\nvar ElementsHolder = /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(function (_props, ref) {\n  var _usePatchElement = usePatchElement(),\n      _usePatchElement2 = _slicedToArray(_usePatchElement, 2),\n      elements = _usePatchElement2[0],\n      patchElement = _usePatchElement2[1];\n\n  React.useImperativeHandle(ref, function () {\n    return {\n      patchElement: patchElement\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\n\nfunction useModal() {\n  var holderRef = React.useRef(null); // ========================== Effect ==========================\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      actionQueue = _React$useState2[0],\n      setActionQueue = _React$useState2[1];\n\n  React.useEffect(function () {\n    if (actionQueue.length) {\n      var cloneQueue = _toConsumableArray(actionQueue);\n\n      cloneQueue.forEach(function (action) {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]); // =========================== Hook ===========================\n\n  var getConfirmFunc = React.useCallback(function (withFunc) {\n    return function hookConfirm(config) {\n      var _a;\n\n      uuid += 1;\n      var modalRef = /*#__PURE__*/React.createRef(); // Proxy to promise with `onClose`\n\n      var resolvePromise;\n      var promise = new Promise(function (resolve) {\n        resolvePromise = resolve;\n      });\n      var silent = false;\n      var closeFunc;\n      var modal = /*#__PURE__*/React.createElement(HookModal, {\n        key: \"modal-\".concat(uuid),\n        config: withFunc(config),\n        ref: modalRef,\n        afterClose: function afterClose() {\n          closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n        },\n        isSilent: function isSilent() {\n          return silent;\n        },\n        onConfirm: function onConfirm(confirmed) {\n          resolvePromise(confirmed);\n        }\n      });\n      closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n\n      if (closeFunc) {\n        destroyFns.push(closeFunc);\n      }\n\n      var instance = {\n        destroy: function destroy() {\n          function destroyAction() {\n            var _a;\n\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n          }\n\n          if (modalRef.current) {\n            destroyAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [destroyAction]);\n            });\n          }\n        },\n        update: function update(newConfig) {\n          function updateAction() {\n            var _a;\n\n            (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n          }\n\n          if (modalRef.current) {\n            updateAction();\n          } else {\n            setActionQueue(function (prev) {\n              return [].concat(_toConsumableArray(prev), [updateAction]);\n            });\n          }\n        },\n        then: function then(resolve) {\n          silent = true;\n          return promise.then(resolve);\n        }\n      };\n      return instance;\n    };\n  }, []);\n  var fns = React.useMemo(function () {\n    return {\n      info: getConfirmFunc(withInfo),\n      success: getConfirmFunc(withSuccess),\n      error: getConfirmFunc(withError),\n      warning: getConfirmFunc(withWarn),\n      confirm: getConfirmFunc(withConfirm)\n    };\n  }, []);\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    key: \"modal-holder\",\n    ref: holderRef\n  })];\n}\n\nexport default useModal;","map":{"version":3,"sources":["/Users/shamryshiraz/Documents/New/Untitled/Portfolio/New/Portfolio-Ruwan-Prasanna/node_modules/antd/es/modal/useModal/index.js"],"names":["_toConsumableArray","React","usePatchElement","withConfirm","withError","withInfo","withSuccess","withWarn","destroyFns","HookModal","uuid","ElementsHolder","memo","forwardRef","_props","ref","elements","patchElement","useImperativeHandle","createElement","Fragment","useModal","holderRef","useRef","useState","actionQueue","setActionQueue","useEffect","length","cloneQueue","forEach","action","getConfirmFunc","useCallback","withFunc","hookConfirm","config","_a","modalRef","createRef","resolvePromise","promise","Promise","resolve","silent","closeFunc","modal","key","afterClose","isSilent","onConfirm","confirmed","current","push","instance","destroy","destroyAction","prev","concat","update","newConfig","updateAction","then","fns","useMemo","info","success","error","warning","confirm"],"mappings":"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","sourcesContent":["\"use client\";\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport * as React from 'react';\nimport usePatchElement from '../../_util/hooks/usePatchElement';\nimport { withConfirm, withError, withInfo, withSuccess, withWarn } from '../confirm';\nimport destroyFns from '../destroyFns';\nimport HookModal from './HookModal';\nlet uuid = 0;\nconst ElementsHolder = /*#__PURE__*/React.memo(/*#__PURE__*/React.forwardRef((_props, ref) => {\n  const [elements, patchElement] = usePatchElement();\n  React.useImperativeHandle(ref, () => ({\n    patchElement\n  }), []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, elements);\n}));\nfunction useModal() {\n  const holderRef = React.useRef(null);\n  // ========================== Effect ==========================\n  const [actionQueue, setActionQueue] = React.useState([]);\n  React.useEffect(() => {\n    if (actionQueue.length) {\n      const cloneQueue = _toConsumableArray(actionQueue);\n      cloneQueue.forEach(action => {\n        action();\n      });\n      setActionQueue([]);\n    }\n  }, [actionQueue]);\n  // =========================== Hook ===========================\n  const getConfirmFunc = React.useCallback(withFunc => function hookConfirm(config) {\n    var _a;\n    uuid += 1;\n    const modalRef = /*#__PURE__*/React.createRef();\n    // Proxy to promise with `onClose`\n    let resolvePromise;\n    const promise = new Promise(resolve => {\n      resolvePromise = resolve;\n    });\n    let silent = false;\n    let closeFunc;\n    const modal = /*#__PURE__*/React.createElement(HookModal, {\n      key: `modal-${uuid}`,\n      config: withFunc(config),\n      ref: modalRef,\n      afterClose: () => {\n        closeFunc === null || closeFunc === void 0 ? void 0 : closeFunc();\n      },\n      isSilent: () => silent,\n      onConfirm: confirmed => {\n        resolvePromise(confirmed);\n      }\n    });\n    closeFunc = (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.patchElement(modal);\n    if (closeFunc) {\n      destroyFns.push(closeFunc);\n    }\n    const instance = {\n      destroy: () => {\n        function destroyAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n        if (modalRef.current) {\n          destroyAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [destroyAction]));\n        }\n      },\n      update: newConfig => {\n        function updateAction() {\n          var _a;\n          (_a = modalRef.current) === null || _a === void 0 ? void 0 : _a.update(newConfig);\n        }\n        if (modalRef.current) {\n          updateAction();\n        } else {\n          setActionQueue(prev => [].concat(_toConsumableArray(prev), [updateAction]));\n        }\n      },\n      then: resolve => {\n        silent = true;\n        return promise.then(resolve);\n      }\n    };\n    return instance;\n  }, []);\n  const fns = React.useMemo(() => ({\n    info: getConfirmFunc(withInfo),\n    success: getConfirmFunc(withSuccess),\n    error: getConfirmFunc(withError),\n    warning: getConfirmFunc(withWarn),\n    confirm: getConfirmFunc(withConfirm)\n  }), []);\n  return [fns, /*#__PURE__*/React.createElement(ElementsHolder, {\n    key: \"modal-holder\",\n    ref: holderRef\n  })];\n}\nexport default useModal;"]},"metadata":{},"sourceType":"module"}